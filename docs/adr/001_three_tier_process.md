# ADR 001: 3階層生成プロセス（Tier 1 → Recipe → Tier 2）

## Status
Accepted (2026-02-13)

## Context

当初は「アウトライン JSON → PPTX」の1段階で生成していた。しかし以下の問題が発生:

1. **意図と実装が混在**: 「何を伝えたいか」と「左から何インチに配置するか」が同じ JSON に入り、AI が座標の話に引きずられてメッセージ設計が疎かになる
2. **テンプレート変更が困難**: JSON にテンプレート固有の座標・色が埋め込まれているため、別テンプレートで再利用できない
3. **レビューポイントが不明確**: 全体構成の話とレイアウトの話が混ざり、何をどの段階でレビューすべきか分からない

## Decision

生成プロセスを3階層に分離する:

- **Tier 1（アウトライン）**: スライドの構成・流れ・タイトルのみ。座標やデザインの情報を含まない
- **Recipe（設計意図）**: 各スライドの「何をどう見せるか」。パターン・トーン・メッセージ。テンプレート非依存
- **Tier 2（テンプレート固有 JSON）**: 具体的な座標・色・フォントサイズ。エンジンが直接消費する形式

## Consequences

- **利点**: 各段階で適切なレビューができる。Recipe が同じなら別テンプレートに変換可能。AI が段階ごとに集中できる
- **代償**: 工程が増える。1枚のスライドに3つの JSON ファイルが関わる複雑さ
- **教訓**: 人間のデザイナーが頭の中で無意識に踏んでいる段階を明示化しただけ。複雑さは元々あった

## References
- [docs/vision.md](../vision.md) 原則3「暗黙の制作段階を明示化する」
- [docs/discussion_20260214.md](../discussion_20260214.md) Q2, Q3
